# 文件管理

在Linux中有普通文件、目录文件、设备文件、链接文件、接口文件。

* 普通文件有纯文本文件、二进制文件、数据库文件等。-

    * 纯文本文件： 经过特定编码转化的文件，例如unicode、utf-8等，可以使用通过的文件编辑器打开、阅读与修改。
    * 二进制文件： 图片、音频、视频、可执行文件等。
    * 数据库文件： 该文件是需要经过特定的程序进行转化才能被我们使用。

* 目录文件是一类特殊的文件，可以包含其他文件和目录。d

* 设备文件有块设备文件与字符设备文件。c

    * 块设备文件成组的设备文件，例如磁盘通常以扇区为一个组，每一个扇区的大小相同。b
    * 字符设备文件直接操作二进制数据的文件，例如键盘，等。

* 链接文件： 使用软链接生成的文件，使用硬链接生成的文件与源文件的属性相同。

* 接口文件一般指socket文件，网络间的通信 s



以上这些文件的类型可以通过ls -l来查看，其格式如下：

```shell

$: ls -l
drwxr-xr-x  # 目录文件
-rw-r--r--  # 普通文件
crw-rw-r--  # 字符设备文件
brw-rw-r--  # 块设备文件
lrwxr-xr--  # 链接文件
srw-rw-rw-  # socket文件

```

## 文件查找

```shell
whereis
which
find
locate
```


* 文件的权限：一般文件的权限有rwx三种，在特殊情况下有一些文件具有特殊的权限，例如/usr/bin/passwd具有setuid权限，setuid只对文件有效，其次是setgid只对目录有效，sticky bit只对文件有效，当文件具有x权限时，这些特殊权限以小写形式出现，否则以大写形式出现。


一些特殊的文件

* .sock
* .pid是一个文件文件，保存进程的pid,防止进程启动多个副本，只有具有特定pid文件的写入权限的进程才能正启动，并将自身pid写入文件。
* .\*rc




## 文件管理

* 【功能】新建文件:

  ```shell
  # 新建一个空的文件。
  touch <file>
  # 通过重定向的方式创建文件。
  echo <content>  > <file>
  # 创建一个硬链接文件。
  ln <sources file> <object>
  # 创建一个软连接文件，创建软连接的可执行文件不能被执行。
  ln -s <source_file> <object>
  # 创建一个目录。
  mkdir <directory>
  ```

* 【功能】查看文件:

  ```shell
   # 查看文件内容。
  cat <file>
  # 从最后一行开始显示。
  tac <file>
  # 带行号显示文件。
  nl <file>
  # 格式化显示文本内容。
  printf <format string> <content>
  # 分页查看文件内容。
  more <file>
  # 分页查看文件内容，可以前翻。
  less <file>
  # 显示文件的头部，默认显示头部10行内容。
  head <file>
  # 显示文件的尾部。
  tail <file>
  # 以二进制的方式显示
  od  <file>
  # 统计文件字节数、行数、字数。
  wc -clw <file>
  export                  # 显示环境变量
  ls                      # 显示目录下的所有内容;
  stat                    # 详细显示文件或目录信息;
  pwd                     # 显示工作目录
  diff                    # 比较两个文件
  # 根据路径显示文件名。
  basename <path>
  # 根据文件名显示路径。
  dirname <file>
  size                    # 查看二进制文件的内存信息。
  ```

* 【功能】修改文件:

  ```shell
  chgrp <groupname> <filename>       # 修改文件所有者所在组
  chown <user name>:<group name> <file name>        # 修改文件所有者
  chmod <number> <filename>          # 修改文件属性
  # 使用字符串替换的方式批量修改文件名。
  rename <oldstring> <newstring> <file>
  # 转换文件编码格式。
  iconv <source file> -f <source type> -t <goal type> -o <goal type>
  # 将文件的制表符转换为空白字符。
  expand -t 4 <file>
  # 将文件的空白字符转换为制表符。
  unexpand -t 4 <file>
  # 将文本转化为适合打印的格式。
  pr -h <title> -l <line> <file>
  # 将文件内容以字符为单位反序输出。
  rev <file>
  ```

* 【功能】复制文件:

  ```shell
  cp <sourcefilename> <objectfilename>     # 复制文件
  cp -r <sourcefilename> <objectfilename>  # 复制目录
  ```

* 【功能】移动文件:

  ```shell
  mv <sourcefilename> <objectfilename>    # 移动或重命名
  cd <WorkingDirectory>                   # 切换工作目录
  ```

* 【功能】删除文件:

  ```shell
  rm <filename>                           # 移除文件或目录;
  rmdir <directoryname>                   # 删除空目录
  rm -r <directoryname>                   # 删除目录及其子目录;
  # 检查和删除重复内容
  uniq -cdu <file>
  # 删除文件，不能删除目录。
  unlink <file>
  ```

* 【功能】文件查询：

  ```shell
  find <filename>                    # 查找文件,不常使用,对硬盘有损伤
  find / -name "*.c"                 # 发现根目录下的所有c文件
  which <filename>                   # 查找文件,查找$PATH中的内容
  whereis <filename>                 # 查找文件,在数据库中寻找,使用updatedb更新数据库
  locate <filename>                  # 查找文件,同上
  grep <filename>
  ```

* 【功能】其他操作：

  ```shell
  # 创建或更新slocate数据库文件。
  updatedb
  ```

在远距离的文件传输中,经过压缩后再传输会节省很多资源,常用的解压软件有`compress`与`tar`;在Linux中`tar`是常用的压缩工具。

* 【功能】压缩文件:

  ```shell
  tar -cvf <*.tar> <filename>                 # 仅打包文件
  tar -czvf <*.tar.gz> <filename>             # 以gzip方式压缩并打包
  tar -cjvf <*.tar.bz2> <filename>            # 以bzip2方式压缩并打包
  ```

  > Note: -c参数为打包文件，-z参数是以gzip的方式压缩文件，-j参数是以bzip2的方式压缩文件，-v参数是显示过程，-f <package name>为指定包文件。

* 【功能】解压文件:

  ```shell
  tar -xvf <*.tar>  <path>                    # 解包
  tar -xzvf <*.tar.gz> <path>                 # 以gzip方式解压并解包
  tar -xjvf <*.tar.bz2> <path>                # 以bzip2方式解压
  ```

  > Note: -x为解压文件。
  
